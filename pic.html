<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>文明互动</title>
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta content="yes" name="apple-mobile-web-app-capable" />
  <meta content="black" name="apple-mobile-web-app-status-bar-style" />
  <meta content="telephone=no" name="format-detection" />
  <link rel="stylesheet" type="text/css" href="css/wappublic.css">
  <link rel="stylesheet" type="text/css" href="css/pic.css">
  <script type="text/javascript" src="js/fontSize.js"></script>
  <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
</head>
<body>
    <!--header-->
    <header>
       <img src="images/banner/banner10.jpg">
    </header>
    <!--section-->
    <section>
       <!--park1-->
       <div class="park-wrap">
         <h3>
           <i></i>
           <span>今天</span>
         </h3>
         <ul>
           <li>
             <a href="javascript:;">
               <b><img src="images/banner/pic001.jpg"></b>
               <span>乱扔垃圾</span>
             </a>
           </li>
           <li>
             <a href="javascript:;">
               <b><img src="images/banner/pic001.jpg"></b>
               <span>乱扔垃圾</span>
             </a>
           </li>
           <li>
             <a href="javascript:;">
               <b><img src="images/banner/pic001.jpg"></b>
               <span>乱扔垃圾</span>
             </a>
           </li>
           <li>
             <a href="javascript:;">
               <b><img src="images/banner/pic001.jpg"></b>
               <span>乱扔垃圾</span>
             </a>
           </li>
           <li>
             <a href="javascript:;">
               <b><img src="images/banner/pic001.jpg"></b>
               <span>乱扔垃圾</span>
             </a>
           </li>
           <li>
             <a href="javascript:;">
               <b><img src="images/banner/pic001.jpg"></b>
               <span>乱扔垃圾</span>
             </a>
           </li>
         </ul>
       </div>
       <!--park2-->
       <div class="park-wrap">
         <h3>
           <i></i>
           <span>09-01</span>
         </h3>
         <ul>
           <li>
             <a href="javascript:;">
               <b><img src="images/banner/pic001.jpg"></b>
               <span>乱扔垃圾</span>
             </a>
           </li>
           <li>
             <a href="javascript:;">
               <b><img src="images/banner/pic001.jpg"></b>
               <span>乱扔垃圾</span>
             </a>
           </li>
           <li>
             <a href="javascript:;"> 
               <b><img src="images/banner/pic001.jpg"></b>
               <span>乱扔垃圾</span>
             </a>
           </li>
           <li>
             <a href="javascript:;">
               <b><img src="images/banner/pic001.jpg"></b>
               <span>乱扔垃圾</span>
             </a>
           </li>
           <li>
             <a href="javascript:;">
               <b><img src="images/banner/pic001.jpg"></b>
               <span>乱扔垃圾</span>
             </a>
           </li>
           <li>
             <a href="javascript:;">
               <b><img src="images/banner/pic001.jpg"></b>
               <span>乱扔垃圾</span>
             </a>
           </li>
         </ul>
       </div>
       <div class="more">上滑加载更多&gt;&gt;</div>
    </section>
    <footer>
       <div class="file-wrap">
         <label for="myFile"></label>
         <input id="myFile" type="file" capture=camcorder accept="image/*">
         <p>文明随手拍</p>
       </div>
       <a class="icon" href="javascript:;"></a>
    </footer>

     <script type="text/javascript">
        $(document).ready(function(){
            var clientHeight=document.documentElement.clientHeight;
            window.onscroll=function(){
            var scrollHeight=document.documentElement.scrollHeight;
            var distance=scrollHeight-clientHeight-20;
            if(document.body.scrollTop>=distance){
              var str='<li><a href="javascript:;"><b><img src="images/banner/pic001.jpg"></b><span>乱扔垃圾</span></a></li><li><a href="javascript:;"><b><img src="images/banner/pic001.jpg"></b><span>乱扔垃圾</span></a></li>';
              $(".park-wrap").eq(1).children('ul').append(str);
            }
          }
        });
    </script>
    <script type="text/javascript">
    $(document).ready(function(){
      var BH=$('ul b').height();
      function fileChange(e){
        var f = e.files[0];//一次只上传1个文件
        //console.log(f);
        var FR = new FileReader();
        FR.readAsDataURL(f);
        FR.onload = function(f){
          compressImg(this.result,(BH*3),function(data){
            //$("#newImg").attr("src",data);//保存图片压缩后的64位编码
            var str1='<li><a href="javascript:;"><b><img src='+data+'></b><span>乱扔垃圾</span></a></li>';
             $(".park-wrap").eq(0).children('ul').prepend(str1);
          });
        };
      }
      document.getElementById("myFile").addEventListener("change", function() {
              fileChange(this);
           },false);
      function compressImg(imgData,maxHeight,onCompress){
        if(!imgData){return false};
        onCompress = onCompress || function(){};
        maxHeight = maxHeight || 1200;//默认最大高度1000px
        var canvas = document.createElement('canvas');
        var img = new Image();
        img.src = imgData;

        img.onload = function(){
          if(img.height>maxHeight) {//按最大高度等比缩放
            img.width *= maxHeight / img.height;
            img.height = maxHeight; 
          }
          var ctx = canvas.getContext("2d");
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          canvas.width = img.width;
          canvas.height = img.height;
          ctx.drawImage(img, 0, 0, img.width, img.height);
          onCompress(canvas.toDataURL("image/jpeg"));
          //console.log(canvas.toDataURL("image/jpeg"));
        };
      }
    });
  </script>
</body>
</html>